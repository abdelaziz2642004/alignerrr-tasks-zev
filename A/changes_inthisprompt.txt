 Summary of Optimizations

  1. Pre-compiled Regex Patterns

  Created a _CompiledPatterns class that pre-compiles all regex patterns at module load time:
  - TRAILING_REDIRECT: For detecting trailing redirect operators
  - INVALID_INPUT_REDIRECT: For detecting < < patterns
  - INVALID_OUTPUT_REDIRECT: For detecting > > patterns
  - CONSECUTIVE_SEMICOLONS: For detecting ;; outside case statements
  - TRIPLE_SEMICOLONS: For detecting ;;; in case statements
  - INVALID_VAR_ASSIGNMENT: For detecting = value without variable name

  2. Performance Improvement

  - Validation now processes ~11,600 commands per second (~0.086ms per command)
  - Pre-compiled patterns avoid recompiling regex on every validation call

  3. Rich Console Integration

  Added styled output methods to ValidationResult:
  - print_styled(console): Prints error with red text, position info, and yellow suggestion
  - to_panel(command): Returns a Rich Panel for more prominent error display

  Added helper function:
  - print_validation_error(result, command, console, use_panel): Convenience function for styled output

  4. Updated CommandHistory

  - Added Rich Console instance to CommandHistory class
  - Updated _filter_valid_commands() with optional verbose parameter to show styled errors
  - Replaced plain print() calls with styled console.print() for consistent UI

  Example Styled Output

  ✗ Unclosed double quote starting at position 5: 'echo "unclosed' (position 5)
    → Add a closing double quote (") to match the opening quote