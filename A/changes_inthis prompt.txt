 Both cases work correctly. The implementation:

  1. In a git repo: Shows branch name and status summary (staged, modified, untracked counts)
  2. Outside a git repo: Shows "Git repo: No"

‚óè The enhancement is complete. Here's a summary of the changes made to src/zev/utils.py:

  Added:
  - subprocess import for running git commands
  - _run_git_command() - Helper function to safely run git commands with timeout handling
  - _get_git_context() - Detects if in a git repo and returns branch name and status summary (staged, modified, untracked file counts)
  - _get_directory_context() - Returns current working directory path, file/directory counts, and a list of notable items

  Modified:
  - get_env_context() - Now combines OS, shell, directory context, and git context into a comprehensive environment context string

  Example output in a git repo:
  OS: Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.35
  SHELL: /bin/bash
  Current directory: /home/abdelaziz/.cache/claude-hfi/-home-abdelaziz-alignerr-zev/A
  Contents: 9 files, 2 directories
  Notable items: LICENSE, requirements.txt, pyproject.toml, README.md, src, CONTRIBUTING.md
  Git repo: Yes
  Branch: hfi/36fdc42d-cfde-40da-aeeb-ccb6ebc6187d/A
  Status: 1 staged, 25 modified, 2 untracked

  Example output outside a git repo:
  OS: Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.35
  SHELL: /bin/bash
  Current directory: /tmp
  Contents: 6 files, 7 directories
  Notable items: snap-private-tmp, remote-wsl-loc.txt, tmux-1000
  Git repo: No