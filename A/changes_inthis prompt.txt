Summary

  I've added workflow state persistence and resume functionality to zev. Here's what was implemented:

  1. New Module: src/zev/workflow_state.py

  - StepStatus: Enum for step states (PENDING, COMPLETED, FAILED, SKIPPED)
  - WorkflowStepState: Tracks individual step status and exit code
  - WorkflowExecutionState: Full workflow state including:
    - Unique ID for each workflow execution
    - Step states for all steps
    - Timestamps (started_at, updated_at)
    - Working directory where workflow was started
    - Completion flag
  - WorkflowStateManager: Handles state persistence to ~/.zev_workflows
    - Creates, updates, and retrieves workflow states
    - Finds next pending step for resume
    - Cleans up old entries (keeps max 20)

  2. Updated src/zev/command_selector.py

  - run_workflow_all(): Now saves state on each step completion/failure
    - Displays workflow ID at start
    - Shows resume hint when workflow is interrupted
    - Supports resuming from a specific step
  - run_workflow_interactive(): Now saves state and has a "Pause workflow" option
    - New "Pause" action to intentionally pause and resume later
    - "Abort" marks workflow complete (won't appear in resume list)
  - show_incomplete_workflows(): Lists all incomplete workflows with progress
  - resume_workflow(): Resumes from next pending step
  - display_workflow_state_overview(): Shows table with step statuses

  3. Updated src/zev/main.py

  - Added --resume flag handling that calls show_incomplete_workflows()

  4. Updated src/zev/utils.py

  - Added --resume to help text

  5. Updated src/zev/constants.py

  - Added WORKFLOW_STATE_FILE_NAME = ".zev_workflows"

  Usage

  # Start a workflow - it will show an ID
  zev "commit and push my changes"
  # Workflow ID: a1b2c3d4 (use 'zev --resume' if interrupted)

  # If interrupted or a step fails, resume later:
  zev --resume
  # Shows list of incomplete workflows with progress
  # Select one to see status and resume options

  Resume Options

  When resuming, users can:
  1. Run remaining steps sequentially - Continue from where they left off
  2. Step through interactively - Review each remaining step
  3. Discard this workflow - Remove from incomplete list
  4. Cancel - Return without resuming
