The implementation is complete. Here's a summary of the changes:

  Summary: Workflow Variables Support

  New File Created:

  - src/zev/workflow_variables.py: Variable extraction and substitution utilities
    - VARIABLE_PATTERN: Regex to match {{variable_name}} or {{variable_name:description}}
    - extract_variables_from_workflow(): Extract all unique variables from a workflow
    - substitute_variables(): Replace variable placeholders with actual values
    - prompt_for_variables(): Interactive prompt for variable values (with existing values as defaults)
    - has_variables(): Check if a workflow contains any variables
    - display_variables_summary(): Show current variable values

  Modified Files:

  1. src/zev/llms/types.py:
    - Added variables: dict[str, str] field to WorkflowState model
  2. src/zev/constants.py:
    - Updated LLM prompt to include variable syntax documentation and examples
    - Shows how to use {{variable_name}} and {{variable_name:description}}
  3. src/zev/command_selector.py:
    - handle_workflow(): Checks for variables and prompts user before execution
    - run_workflow_all(): Accepts variables, stores in state, substitutes in commands
    - run_workflow_interactive(): Same variable support as run_all
    - copy_workflow_commands(): Substitutes variables before copying
    - resume_workflow(): Displays saved variables, allows editing before resuming

  Usage Example:

  When a workflow contains variables like:
  git checkout -b {{branch_name:Name for new branch}}
  git commit -m '{{commit_message}}'

  The user will see:
  This workflow requires the following variables:

  ? Branch Name (Name for new branch): feature/my-feature
  ? Commit Message: Add new feature

  Variables:
    branch_name = feature/my-feature
    commit_message = Add new feature

  When resuming an interrupted workflow, the saved variable values are preserved and the user can choose to
  "Edit variables before resuming" if needed.
